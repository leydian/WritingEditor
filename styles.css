* { box-sizing: border-box; font-family: system-ui, sans-serif; }
body { margin: 0; background:#111827; color:#e5e7eb; }
.auth-gate { position:fixed; inset:0; background:rgba(3,7,18,.92); display:flex; align-items:center; justify-content:center; z-index:20; }
.auth-gate.hidden { display:none; }
.auth-card { width:min(520px, 90vw); background:#1f2937; border:1px solid #374151; border-radius:12px; padding:18px; display:flex; flex-direction:column; gap:10px; }
.auth-actions { display:flex; gap:8px; flex-wrap:wrap; }
.app { display:grid; grid-template-columns: 240px 8px 1fr 260px; height:100vh; }
.sidebar-resizer { background:#0f172a; border-left:1px solid #374151; border-right:1px solid #374151; cursor:col-resize; }
.sidebar-resizer:hover { background:#1e293b; }
.sidebar, .stats-panel { background:#1f2937; padding:12px; overflow:auto; }
.sidebar-header { display:flex; justify-content:space-between; align-items:center; }
.stats-panel-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.stats-panel-header h2, .sidebar-header h1 { margin:0; }
.tree-item { padding:6px; border-radius:6px; cursor:pointer; display:flex; align-items:center; justify-content:space-between; gap:8px; }
.tree-item > span { flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.tree-item:hover, .tree-item.active { background:#374151; }
.tree-item.drag-over { outline: 1px dashed #60a5fa; background:#1e3a5f; }
.tree-act-btn { padding:2px 8px; font-size:12px; line-height:1.2; }
.tree-rename-btn { background:#1e40af; border-color:#1d4ed8; }
.tree-del-btn { padding:2px 8px; font-size:12px; line-height:1.2; }
.tree-indent { margin-left: 16px; }
.main { display:flex; flex-direction:column; min-width:0; }
.toolbar { display:flex; justify-content:space-between; gap:8px; padding:10px; background:#0f172a; border-bottom:1px solid #374151; flex-wrap:wrap; }
.left-tools, .right-tools { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
button, input { cursor: pointer; background:#374151; color:#e5e7eb; border:1px solid #4b5563; border-radius:6px; padding:6px 10px; }
.danger-btn { background:#991b1b; border-color:#b91c1c; color:#fee2e2; }
.danger-btn:hover { background:#b91c1c; }
.danger-btn:disabled { opacity:.5; cursor:not-allowed; }
input { width:150px; }
.stats-row { display:flex; gap:10px; padding:10px; border-bottom:1px solid #374151; }
.timer-box, .daily-box { background:#1f2937; border:1px solid #374151; padding:10px; border-radius:8px; display:flex; gap:6px; flex-direction:column; }
.timer-head { display:flex; align-items:center; justify-content:space-between; gap:8px; }
#timer-display { font-size:24px; font-weight:700; }
.stats-panel .stats-row { flex-direction: column; padding:0 0 10px; margin-bottom:10px; }
#daily-stats { white-space: pre-line; line-height: 1.5; color:#cbd5e1; }
.editor-area { display:grid; flex:1; min-height:0; }
.editor-area.single { grid-template-columns: 1fr; }
.editor-area.vertical { grid-template-columns: 1fr 1fr; }
.editor-area.horizontal { grid-template-rows: 1fr 1fr; }
.pane { min-height:0; border:1px solid #374151; display:flex; flex-direction:column; }
.pane.hidden { display:none; }
.pane-head { padding:6px; background:#1f2937; font-size:12px; display:flex; align-items:center; justify-content:space-between; gap:8px; }
.pane-save-btn { padding:3px 10px; font-size:12px; }
.export-wrap { position: relative; display: inline-flex; }
.export-menu { position: absolute; top: calc(100% + 6px); right: 0; display: flex; gap: 6px; padding: 8px; background:#0b1220; border:1px solid #334155; border-radius:10px; z-index:40; box-shadow: 0 8px 24px rgba(0,0,0,.35); }
.hidden { display: none !important; }
.hidden-panel { display: none !important; }
.panel-icon-btn { width:28px; height:28px; padding:0; display:inline-flex; align-items:center; justify-content:center; font-size:13px; border-radius:999px; background:#334155; border-color:#475569; transition: background .18s ease, transform .18s ease; }
.panel-icon-btn:hover { background:#475569; transform: translateY(-1px); }
.edge-bar { position: fixed; top: 0; bottom: 0; width: 8px; padding:0; border-radius:0; z-index:50; background: linear-gradient(180deg, #475569 0%, #334155 100%); border:1px solid #64748b; opacity:.75; transition: opacity .18s ease, width .18s ease; }
.edge-bar:hover { opacity:1; width:10px; }
.edge-bar.left { left: 4px; }
.edge-bar.right { right: 4px; }
textarea { flex:1; width:100%; resize:none; border:none; background:#0b1220; color:#f9fafb; padding:14px; font-size:16px; line-height:1.6; }
textarea:focus { outline:none; }
.calendar { display:grid; grid-template-columns: repeat(7,1fr); gap:4px; }
.calendar-tools { display:flex; gap:8px; align-items:center; margin: 0 0 10px; flex-wrap:wrap; }
.calendar-tools #goal-input { width: 100%; max-width: 220px; }
.day { padding:6px 4px; background:#111827; border:1px solid #374151; border-radius:4px; text-align:center; font-size:12px; }
.day.hit::after { content:'●'; color:#34d399; display:block; font-size:11px; }
.pill { padding:6px 10px; background:#1f2937; border-radius:14px; }
#history-search { width: 100%; margin-bottom: 8px; }
.danger-dialog { width:min(560px, 92vw); background:#111827; color:#fee2e2; border:2px solid #ef4444; border-radius:12px; padding:18px; }
.danger-copy { margin:8px 0 10px; line-height:1.5; font-weight:700; color:#fecaca; }
.danger-strong { margin:0 0 10px; color:#fca5a5; font-weight:700; }
.danger-list { margin:0 0 12px; padding-left:20px; color:#fca5a5; line-height:1.5; }
.danger-check { display:flex; gap:8px; align-items:flex-start; margin: 0 0 10px; }
#withdraw-email, #withdraw-password { width:100%; margin:0 0 8px; }
#withdraw-confirm-text { width:100%; margin:8px 0 12px; }
.danger-actions { display:flex; justify-content:flex-end; gap:8px; }
#upgrade-dialog { width:min(420px, 92vw); background:#111827; color:#e5e7eb; border:1px solid #374151; border-radius:12px; padding:16px; }
#upgrade-email, #upgrade-password { width:100%; margin:0 0 8px; }
@media (max-width: 1100px) { .app { grid-template-columns: 200px 8px 1fr; } .stats-panel { display:none; } }

#sync-status[data-status='pending'] { background:#78350f; }
#sync-status[data-status='ok'] { background:#065f46; }
#sync-status[data-status='error'] { background:#7f1d1d; }
